<app-company-nav></app-company-nav><br /><br />
<form [formGroup]="FlightEditForm">
  <div class="main_content_iner">
    <div class="container-fluid p-0 sm_padding_15px">
      <div class="row justify-content-center">
        <div class="col-lg-6">
          <div class="white_card card_height_100 mb_30">
            <div class="white_card_header">
              <div class="box_header m-0">
                <div class="main-title">
                  <h3 class="m-0">Flight Details</h3>
                  <br />
                </div>
              </div>
            </div>
            <div class="white_card_body">
              <!--Dropdown for selecting airplane names-->

              <label class="form-label" for="exampleInputEmail1"
                >Airplane Name</label
              >
              <div class="dropdown">
                <div class="mb-4 pb-2">
                  <select
                    class="form-control"
                    formControlName="airplane"
                    id="Companydropdown"
                    [(ngModel)]="response.airplane.airplaneId"
                  >
                    <option value="">
                      {{ response.airplane.airplaneName }}
                    </option>
                    <option
                      *ngFor="let name of AirplaneDetails"
                      [value]="name.airplaneId"
                    >
                      {{ name.airplaneName }}
                    </option>
                  </select>
                  <div>
                    <span
                      
                      *ngIf="
                        FlightEditForm.controls['airplane'].touched &&
                        FlightEditForm.hasError('required', 'airplane')
                      "
                      ><i class="span1">Please select airplane name</i></span
                    >
                  </div>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="exampleInputEmail1"
                  >Flight Number</label
                >
                <input
                  type="email"
                  class="form-control"
                  id="exampleInputEmail1"
                  formControlName="flightno"
                  aria-describedby="emailHelp"
                  placeholder=""
                  [(ngModel)]="response.flightNumber"
                />
                <div>
                  <span
                    
                    *ngIf="
                      FlightEditForm.controls['flightno'].touched &&
                      FlightEditForm.hasError('required', 'flightno')
                    "
                    ><i class="span1">Please enter flight number</i></span
                  >
                  <span
                    
                    *ngIf="
                      FlightEditForm.controls['flightno'].touched &&
                      FlightEditForm.hasError('pattern', 'flightno')
                    "
                    ><i class="span1">Invalid format</i></span
                  >
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="exampleInputPassword1"
                  >Departing City</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="exampleInputPassword"
                  formControlName="departure"
                  placeholder=""
                  [(ngModel)]="response.departure"
                />
                <div>
                  <span
                    
                    *ngIf="
                      FlightEditForm.controls['departure'].touched &&
                      FlightEditForm.hasError('required', 'departure')
                    "
                    ><i class="span1">Please enter departure city</i></span
                  >
                  <span
                    
                    *ngIf="
                      FlightEditForm.controls['departure'].touched &&
                      FlightEditForm.hasError('pattern', 'departure')
                    "
                    ><i class="span1">Invalid Format</i></span
                  >
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="exampleInputPassword1"
                  >Departure date&time</label
                >
                <input
                  type="datetime-local"
                  min="{{ response.depDateTime }}"
                  class="form-control"
                  id="exampleInputPassword"
                  formControlName="departureDT"
                  placeholder=""
                  [(ngModel)]="response.depDateTime"
                  (change)="setDate($event)"
                />
                <div>
                  <span
                   
                    *ngIf="
                      FlightEditForm.controls['departureDT'].touched &&
                      FlightEditForm.hasError('required', 'departureDT')
                    "
                    ><i  class="span1">Please enter departing date & time</i></span
                  >
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="exampleInputPassword1"
                  >Destination City</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="exampleInputPassword"
                  formControlName="destination"
                  placeholder=""
                  [(ngModel)]="response.destination"
                />
                <div>
                  <span
                    
                    *ngIf="
                      FlightEditForm.controls['destination'].touched &&
                      FlightEditForm.hasError('required', 'destination')
                    "
                    ><i class="span1">Please enter destination city</i></span
                  >
                  <span
                   
                    *ngIf="
                      FlightEditForm.controls['destination'].touched &&
                      FlightEditForm.hasError('pattern', 'destination')
                    "
                    ><i  class="span1">*Invalid Format*</i></span
                  >
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="exampleInputPassword1"
                  >Arrival date&time</label
                >
                <input
                  type="datetime-local"
                  (mouseover)="arrivalDate()"
                  class="form-control"
                  id="exampleInputPassword"
                  formControlName="ariivalDT"
                  placeholder=""
                  [(ngModel)]="response.destDateTime"
                  min="{{ ArrivalDate }}"
                />
                <div>
                  <span
                    
                    *ngIf="
                      FlightEditForm.controls['ariivalDT'].touched &&
                      FlightEditForm.hasError('required', 'ariivalDT')
                    "
                    ><i class="span1">Please enter arrival date & time</i></span
                  >
                </div>
              </div>
            </div>

            <div class="white_card_body">
              <table class="">
                <thead>
                  <tr>
                    <th scope="col">SeatId</th>
                    <th scope="col">Type</th>
                    <th scope="col">Number</th>
                    <th scope="col">Price</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let seats of seatsArray">
                    <td>{{ seats.seatId }}</td>
                    <td>{{ seats.seatType }}</td>
                    <td>{{ seats.number }}</td>
                    <td>{{ seats.price }}</td>
                    <td>
                      <a class="status_btn" (click)="openPopup(seats.seatId)"
                        >Edit</a
                      >
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <br />
            <div>
              <br />
              <button
                type="submit"
                class="btn btn-secondary"
                id="btn1"
                (click)="cancel()"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="btn btn-success"
                (click)="updateFlight()"
              >
                Submit
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal"
    tabindex="-1"
    role="dialog"
    [ngStyle]="{ display: displayStyle }"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Seat Details</h4>
        </div>
        <div class="modal-body">
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <input
                name="seatid"
                formControlName="seatid"
                type="text"
                class="form-control form-control-lg"
                [(ngModel)]="seatResponse.seatId"
                
              />
            </div>
          </div>
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <select
                class="form-control form-control-lg"
                formControlName="seatType"
                id="dropdownMenuButton1"
                [(ngModel)]="seatResponse.seatType"
              >
                <option value="">{{ seatResponse.seatType }}</option>
                <option value="economy">economy</option>
                <option value=" premium economy">premium economy</option>
                <option value="business">business</option>
                <option value="first class">first class</option>
              </select>
            </div>
          </div>
          <br /><br />
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <input
                formControlName="number"
                name="number"
                type="text"
                class="form-control form-control-lg"
                [(ngModel)]="seatResponse.number"
              />
            </div>
          </div>
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <input
                formControlName="price"
                name="price"
                type="text"
                class="form-control form-control-lg"
                [(ngModel)]="seatResponse.price"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              (click)="updateSeat()"
            >
              Update
            </button>
            <button
              type="button"
              class="btn btn-primary"
              (click)="closePopup()"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>