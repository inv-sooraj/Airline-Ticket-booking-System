<app-company-nav></app-company-nav><br /><br />

<body>
  <form [formGroup]="FlightEditForm">
    <div class="main_content_iner">
      <div class="container-fluid p-0 sm_padding_15px">
        <div class="row justify-content-center">
          <div class="col-lg-6">
            <div class="white_card card_height_100 mb_30">
              <div class="white_card_header">
                <div class="box_header m-0">
                  <div class="main-title">
                    <h3 class="m-0">Flight Details</h3>
                    <br />
                  </div>
                </div>
              </div>
              <div class="white_card_body">
                <!--Dropdown for selecting airplane names-->

                <label class="form-label" for="exampleInputEmail1"
                  >Airplane Name</label
                >
                <div class="dropdown">
                  <div class="mb-4 pb-2">
                    <select
                      class="form-control"
                      formControlName="airplane"
                      id="Companydropdown"
                        [(ngModel)]="response.airplane.airplaneId"
                    >
                      <option value="">{{response.airplane.airplaneName}}</option>
                      <option
                        *ngFor="let name of AirplaneDetails"
                        [value]="name.airplaneId"
                      >
                        {{ name.airplaneName }}
                      </option>
                    </select>
                    <div>
                      <span
                        class="span1"
                        *ngIf="
                        FlightEditForm.controls['airplane'].touched &&
                        FlightEditForm.hasError('required', 'airplane')
                        "
                        ><i>Please select airplane name</i></span
                      >
                    </div>
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="exampleInputEmail1"
                    >Flight Number</label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="exampleInputEmail1"
                    formControlName="flightno"
                    aria-describedby="emailHelp"
                    placeholder=""
                    [(ngModel)]="response.flightNumber"
                  />
                  <div>
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['flightno'].touched &&
                      FlightEditForm.hasError('required', 'flightno')
                      "
                      ><i>Please enter flight number</i></span
                    >
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['flightno'].touched &&
                      FlightEditForm.hasError('pattern', 'flightno')
                      "
                      ><i>Invalid format</i></span
                    >
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="exampleInputPassword1"
                    >Departing City</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="exampleInputPassword"
                    formControlName="departure"
                    placeholder=""
                    [(ngModel)]="response.departure"
                  />
                  <div>
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['departure'].touched &&
                      FlightEditForm.hasError('required', 'departure')
                      "
                      ><i>Please enter departure city</i></span
                    >
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['departure'].touched &&
                      FlightEditForm.hasError('pattern', 'departure')
                      "
                      ><i>Invalid Format</i></span
                    >
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="exampleInputPassword1"
                    >Departure date&time</label
                  >
                  <input
                    type="datetime-local"
                    min="{{ today }}"
                    class="form-control"
                    id="exampleInputPassword"
                    formControlName="departureDT"
                    placeholder=""
                    [(ngModel)]="response.depDateTime"
                  />
                  <div>
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['departureDT'].touched &&
                      FlightEditForm.hasError('required', 'departureDT')
                      "
                      ><i>Please enter departing date & time</i></span
                    >
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="exampleInputPassword1"
                    >Destination City</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="exampleInputPassword"
                    formControlName="destination"
                    placeholder=""
                    [(ngModel)]="response.destination"
                  />
                  <div>
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['destination'].touched &&
                      FlightEditForm.hasError('required', 'destination')
                      "
                      ><i>Please enter destination city</i></span
                    >
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['destination'].touched &&
                      FlightEditForm.hasError('pattern', 'destination')
                      "
                      ><i>*Invalid Format*</i></span
                    >
                  </div>
                </div>
                <div class="mb-3">
                  <label class="form-label" for="exampleInputPassword1"
                    >Arrival date&time</label
                  >
                  <input
                    type="datetime-local"
                    min="{{ today }}"
                    class="form-control"
                    id="exampleInputPassword"
                    formControlName="ariivalDT"
                    placeholder=""
                    [(ngModel)]="response.destDateTime"
                  />
                  <div>
                    <span
                      class="span1"
                      *ngIf="
                      FlightEditForm.controls['ariivalDT'].touched &&
                      FlightEditForm.hasError('required', 'ariivalDT')
                      "
                      ><i>Please enter arrival date & time</i></span
                    >
                  </div>
                
                </div>
              </div>
              <div class="white_card_body">
                <button class="btn btn-dark" (click)="addCreds()" id="btnadd">
                  Click here to add seat details</button
                ><br />

                <!--Formarray to store seat details-->

                <div class="mb-4">
                  <div
                    formArrayName="seatDetails"
                    *ngFor="
                      let seatDetail of seatDetails().controls;
                      let i = index
                    "
                    [formGroupName]="i">
                    <br /><ng-container [formGroupName]="i">
                      
                      <div class="mb-4 pb-2">
                        <button type="button" class="close" aria-label="Close" (click)="delete(i)">
                          <span aria-hidden="true">&times;</span>
                        </button><br>
                        <select
                          class="form-control"
                          formControlName="seatType"
                          id="dropdownMenuButton1"
                        >
                          <option selected>Seat type</option>
                          <option value="economy">economy</option>
                          <option value=" premium economy">
                            premium economy
                          </option>
                          <option value="business">business</option>
                          <option value="first class">first class</option>
                        </select>
                        <input
                          class="form-control"
                          placeholder="No of seats"
                          formControlName="number"
                          id="exampleInputPassword1"
                        />
                        <input
                          class="form-control"
                          placeholder="Price"
                          formControlName="price"
                          id="exampleInputPassword2"
                        />
                        
                      </div>
                    </ng-container>
                  </div>
                  <br />
                  <div>
                    <br />
                    <button
                      type="submit"
                      class="btn btn-secondary"
                      id="btn1"
                      (click)="cancel()"
                    >
                      Cancel
                    </button>
                    <button
                      type="submit"
                      class="btn btn-success"
                      (click)="updateFlight()"
                      >
                      Update
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="modal"
    tabindex="-1"
    role="dialog"
    [ngStyle]="{ display: displayStyle }"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Seat Details</h4>
        </div>
        <div class="modal-body">
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <input
                name="seatid"
                formControlName="seatid"
                type="text"
                class="form-control form-control-lg"
                [(ngModel)]="seatResponse.seatId"
              />
            </div>
          </div>
          <!-- <div class="mb-4 pb-2">
                       <div class="form-outline">
                          <input  name="seattype" formControlName="seatType"  type="text"  class="form-control form-control-lg" [(ngModel)]="seatResponse.seatType" />
                       </div>
                    </div> -->
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <select
                class="form-control form-control-lg"
                formControlName="seatType"
                id="dropdownMenuButton1"
                [(ngModel)]="seatResponse.seatType"
              >
                <option value="">{{ seatResponse.seatType }}</option>
                <option value="economy">economy</option>
                <option value=" premium economy">premium economy</option>
                <option value="business">business</option>
                <option value="first class">first class</option>
              </select>
            </div>
          </div>
          <br /><br />

          <div class="mb-4 pb-2">
            <div class="form-outline">
              <input
                formControlName="number"
                name="number"
                type="text"
                class="form-control form-control-lg"
                [(ngModel)]="seatResponse.number"
              />
            </div>
          </div>
          <div class="mb-4 pb-2">
            <div class="form-outline">
              <input
                formControlName="price"
                name="price"
                type="text"
                class="form-control form-control-lg"
                [(ngModel)]="seatResponse.price"
              />
            </div>
          </div>
          <!-- <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                 </div> -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              (click)="updateSeat()"
            >
              Update
            </button>
            <button
              type="button"
              class="btn btn-primary"
              (click)="closePopup()"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
